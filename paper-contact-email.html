<!doctype html>
<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../iron-icons/communication-icons.html">
<link rel="import" href="../paper-item/paper-icon-item.html">
<link rel="import" href="../paper-ripple/paper-ripple.html">
<link rel="import" href="paper-contact-behavior.html">
<link rel="import" href="paper-contact-shared-styles.html">

<!--
Component for email contact details, that triggers the opening of the email client on tap.

### Example

```html
<paper-contact-email>email@example.com</paper-contact-email>
```

@demo demo/index.html
-->
<dom-module id="paper-contact-email">

	<template>
		<style include="paper-contact-shared-styles"></style>

		<paper-icon-item class="item" on-tap="openInSameTab">
			<paper-ripple></paper-ripple>
			<iron-icon class="icon" icon="communication:email" slot="item-icon"></iron-icon>
			<div class="text"><slot></slot></div>
		</paper-icon-item>
	</template>

</dom-module>

<script>
(function() {
	Polymer({
		is: 'paper-contact-email',

		behaviors: [
			Polymer.PaperContactBehavior
		],
		
		properties: {
			/**
			 * Set this to add a default subject line.
			 */
			emailSubject: {
				type: String,
				reflectToAttribute: true,
				notify: true
			},
			/**
			 * Set this to add default body content.
			 */
			emailBody: {
				type: String,
				reflectToAttribute: true,
				notify: true
			}
		},

		// Private methods
		_getTargetUrl: function(content) {
			let returnString = 'mailto:' + encodeURIComponent(content);
			
			if (this.emailSubject || this.emailBody) returnString = returnString.concat('?');
			
			if (this.emailSubject) returnString = returnString.concat(`subject=${this.emailSubject}`);
			
			if (this.emailSubject && this.emailBody) returnString = returnString.concat('&');
			
			if (this.emailBody) returnString = returnString.concat(`body=${this.emailBody}`);
			
			return returnString;
		}
	});
})();
</script>
